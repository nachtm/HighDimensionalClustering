apply plugin: 'java'

test {
    testLogging.showStandardStreams = true
}

repositories {
    jcenter()
}

dependencies {
    compile 'com.google.guava:guava:21.0'
    testCompile 'junit:junit:4.12'
}

task visJar(type: Jar) {
	manifest {
        attributes 'Main-Class': 'spinacht.visualizer.Visualizer'
    }
    baseName = project.name + '-visualizer'
    from {
        configurations.compile.collect {
            it.isDirectory() ? it : zipTree(it)
        }
    }
    with jar
}

task run(type: JavaExec) {
    if (project.hasProperty("theClass")) {
        classpath = sourceSets.main.runtimeClasspath
        main = theClass
        if (project.hasProperty("theArgs")) {
            args Eval.me(theArgs)
        }
    }
}
